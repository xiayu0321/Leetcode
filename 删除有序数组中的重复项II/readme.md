## 删除有序数组中的重复项II（中等）

### 题目

给你一个有序数组 nums ，请你『原地』删除重复出现的元素，使每个元素最多出现两次 ，返回删除后数组的新长度。

不要使用额外的数组空间，你必须在『原地』修改输入数组，并在使用 O(1) 额外空间的条件下完成。

提示：

- `1 <= nums.length <= 3 * 104`
- `-104 <= nums[i] <= 104`
- `nums` 已按升序排列

链接：https://leetcode-cn.com/problems/remove-duplicates-from-sorted-array-ii

### 思路

由于数组 nums 是有序的，因此相同元素一定连续。同时要求每个元素最多出现两次，因此长度小于等于2的的数组可以无需处理，直接返回。

由于要求返回新数组的长度，我们需要用一个下标fast遍历原数组，判断当前元素是否应该被保留，如果要被保留就把它移动到合适的位置上，这个合适的位置就得用另一个下标slow表示，它之前的所有元素都是经过检查以后被保留的元素，即它代表新数组的长度。因此应采用快慢双指针法。

 由于前两个元素可以无需处理，因此初始时两指针的值都可以设为2，然后指针 fast 遍历数组。由于每个元素最多出现两次，因此判断此时元素与 slow-2的元素 是否相同，如果不相同则需要保留该元素，将该元素保留到新数组下标的位置上，即 slow 指向的位置，保留后还要移动 slow 的位置，继续遍历；如果相同则无需保留该元素，则直接到下一个元素。

